br_plt <- ggplot(data = rcp85_75, aes(x=CountyGroup, y=value)) +
geom_bar(aes(fill = factor(variable)), stat="identity", position="dodge") +
facet_grid(. ~ ClimateGroup, scales = "free") +
labs(y="Julian day (median)") +
ylim(0, 300) +
theme_bw() +
theme(axis.text.y = element_text(size = 9, angle=90, color="black"),
axis.text.x = element_text(size = 9, color="black"),
axis.title.x=element_blank(),
legend.position="bottom",
legend.spacing.x = unit(.1, 'cm'),
legend.title=element_blank(),
legend.text=element_text(size=10),
legend.key.size = unit(.4, "cm"),
panel.grid.major = element_line(size = 0.05),
panel.grid.minor = element_line(size = 0.2)) +
scale_fill_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4")) +
scale_color_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4"))
ggsave("rcp85_75.png", br_plt, path=data_dir, dpi=500, device="png", width=5.5, height=3.1, unit="in")
rm(rcp85_75)
data_dir = "/Users/hn/Documents/GitHub/Kirti/codling_moth/to_write_paper/figures/pest_window/"
color_ord = c("grey70", "dodgerblue", "olivedrab4", "darkgoldenrod1")
input_name = "rcp45_50.csv"
rcp45_50 <- data.table(read.csv(paste0(data_dir, input_name)))
rcp45_50[rcp45_50$ClimateGroup == "colder", ]$ClimateGroup = "Cooler Areas"
rcp45_50[rcp45_50$ClimateGroup == "warmer", ]$ClimateGroup = "Warmer Areas"
rcp45_50 = melt(rcp45_50, id = c("ClimateGroup", "CountyGroup"))
rcp45_50$CountyGroup = factor(rcp45_50$CountyGroup, levels = c("Historical",
"2040's",
"2060's",
"2080's"))
rcp45_50
ggplot(data = rcp45_50, aes(x=CountyGroup, y=value, fill = variable))
ggplot(data = rcp45_50, aes(x=CountyGroup, y=value, fill = variable)) +
# geom_bar(aes(fill = factor(variable)), stat="identity", position="dodge") +
geom_line(stat="identity", position=position_dodge())
ggplot(rcp45_50, aes(x=CountyGroup, y=value, color=variable)) +
geom_point() +
geom_line()
rcp45_50
ggplot(rcp45_50, aes(x=CountyGroup, y=value, color=variable)) +
geom_point() +
geom_line() +
facet_grid(. ~ ClimateGroup, scales = "free")
ggplot(rcp45_50, aes(x=CountyGroup, y=value, color=variable)) +
#geom_point() +
geom_line() +
facet_grid(. ~ ClimateGroup, scales = "free")
ggplot(rcp45_50, aes(x=CountyGroup, y=value, color=variable)) +
geom_point() +
#geom_line() +
geom_line(stat="identity") +
facet_grid(. ~ ClimateGroup, scales = "free")
rcp45_50
ggplot(rcp45_50, aes(x=CountyGroup, y=value, color=variable)) +
geom_point() +
#geom_line() +
geom_line(group=CountyGroup) +
facet_grid(. ~ ClimateGroup, scales = "free")
ggplot(rcp45_50, aes(x=CountyGroup, y=value, color=variable)) +
geom_point() +
#geom_line() +
geom_line(group= rcp45_50$CountyGroup) +
facet_grid(. ~ ClimateGroup, scales = "free")
ggplot(rcp45_50, aes(x=CountyGroup, y=value, color=variable)) +
geom_point() +
#geom_line() +
geom_line(group= rcp45_50$CountyGroup) +
facet_grid(. ~ ClimateGroup, scales = "free") +
labs(y="Julian day (median)") +
ylim(0, 300) +
theme_bw() +
theme(axis.text.y = element_text(size = 9, angle=90, color="black"),
axis.text.x = element_text(size = 9, color="black"),
axis.title.x=element_blank(),
legend.position="bottom",
legend.spacing.x = unit(.1, 'cm'),
legend.title=element_blank(),
legend.text=element_text(size=10),
legend.key.size = unit(.4, "cm"),
panel.grid.major = element_line(size = 0.05),
panel.grid.minor = element_line(size = 0.2)) +
scale_fill_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4")) +
scale_color_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4"))
rm(list=ls())
library(data.table)
library(ggplot2)
data_dir = "/Users/hn/Documents/GitHub/Kirti/codling_moth/to_write_paper/figures/pest_window/"
color_ord = c("grey70", "dodgerblue", "olivedrab4", "darkgoldenrod1")
input_name = "rcp45_50.csv"
rcp45_50 <- data.table(read.csv(paste0(data_dir, input_name)))
rcp45_50[rcp45_50$ClimateGroup == "colder", ]$ClimateGroup = "Cooler Areas"
rcp45_50[rcp45_50$ClimateGroup == "warmer", ]$ClimateGroup = "Warmer Areas"
rcp45_50 = melt(rcp45_50, id = c("ClimateGroup", "CountyGroup"))
rcp45_50$CountyGroup = factor(rcp45_50$CountyGroup, levels = c("Historical",
"2040's",
"2060's",
"2080's"))
br_plt <- ggplot(rcp45_50, aes(x=CountyGroup, y=value, color=variable)) +
geom_point() +
#geom_line() +
geom_line(group= rcp45_50$CountyGroup) +
facet_grid(. ~ ClimateGroup, scales = "free") +
labs(y="Julian day (median)") +
ylim(0, 300) +
theme_bw() +
theme(axis.text.y = element_text(size = 9, angle=90, color="black"),
axis.text.x = element_text(size = 9, color="black"),
axis.title.x=element_blank(),
legend.position="bottom",
legend.spacing.x = unit(.1, 'cm'),
legend.title=element_blank(),
legend.text=element_text(size=10),
legend.key.size = unit(.4, "cm"),
panel.grid.major = element_line(size = 0.05),
panel.grid.minor = element_line(size = 0.2)) +
scale_fill_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4")) +
scale_color_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4"))
ggsave("rcp45_50_line.png", br_plt, path=data_dir, dpi=500, device="png", width=5.5, height=3.1, unit="in")
###############################################################################################################
###########################
###########################          rcp85_50
###########################
rm(list=ls())
library(data.table)
library(ggplot2)
data_dir = "/Users/hn/Documents/GitHub/Kirti/codling_moth/to_write_paper/figures/pest_window/"
color_ord = c("grey70", "dodgerblue", "olivedrab4", "darkgoldenrod1")
input_name = "rcp85_50.csv"
rcp85_50 <- data.table(read.csv(paste0(data_dir, input_name)))
rcp85_50[rcp85_50$ClimateGroup == "colder", ]$ClimateGroup = "Cooler Areas"
rcp85_50[rcp85_50$ClimateGroup == "warmer", ]$ClimateGroup = "Warmer Areas"
rcp85_50 = melt(rcp85_50, id = c("ClimateGroup", "CountyGroup"))
rcp85_50$CountyGroup = factor(rcp85_50$CountyGroup, levels = c("Historical",
"2040's",
"2060's",
"2080's"))
br_plt <- ggplot(rcp85_50, aes(x=CountyGroup, y=value, color=variable)) +
geom_point() +
#geom_line() +
geom_line(group= rcp85_50$CountyGroup) +
facet_grid(. ~ ClimateGroup, scales = "free") +
labs(y="Julian day (median)") +
ylim(0, 300) +
theme_bw() +
theme(axis.text.y = element_text(size = 9, angle=90, color="black"),
axis.text.x = element_text(size = 9, color="black"),
axis.title.x=element_blank(),
legend.position="bottom",
legend.spacing.x = unit(.1, 'cm'),
legend.title=element_blank(),
legend.text=element_text(size=10),
legend.key.size = unit(.4, "cm"),
panel.grid.major = element_line(size = 0.05),
panel.grid.minor = element_line(size = 0.2)) +
scale_fill_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4")) +
scale_color_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4"))
ggsave("rcp85_50_line.png", br_plt, path=data_dir, dpi=500, device="png", width=5.5, height=3.1, unit="in")
###########################
###########################          25 %
###########################
###############################################################################################################
###############################################################################################################
###########################
###########################          rcp45_25
###########################
rm(list=ls())
library(data.table)
library(ggplot2)
data_dir = "/Users/hn/Documents/GitHub/Kirti/codling_moth/to_write_paper/figures/pest_window/"
color_ord = c("grey70", "dodgerblue", "olivedrab4", "darkgoldenrod1")
input_name = "rcp45_25.csv"
rcp45_25 <- data.table(read.csv(paste0(data_dir, input_name)))
rcp45_25[rcp45_25$ClimateGroup == "colder", ]$ClimateGroup = "Cooler Areas"
rcp45_25[rcp45_25$ClimateGroup == "warmer", ]$ClimateGroup = "Warmer Areas"
rcp45_25 = melt(rcp45_25, id = c("ClimateGroup", "CountyGroup"))
rcp45_25$CountyGroup = factor(rcp45_25$CountyGroup, levels = c("Historical",
"2040's",
"2060's",
"2080's"))
br_plt <- ggplot(rcp45_25, aes(x=CountyGroup, y=value, color=variable)) +
geom_point() +
#geom_line() +
geom_line(group= rcp45_25$CountyGroup) +
facet_grid(. ~ ClimateGroup, scales = "free") +
labs(y="Julian day (median)") +
ylim(0, 300) +
theme_bw() +
theme(axis.text.y = element_text(size = 9, angle=90, color="black"),
axis.text.x = element_text(size = 9, color="black"),
axis.title.x=element_blank(),
legend.position="bottom",
legend.spacing.x = unit(.1, 'cm'),
legend.title=element_blank(),
legend.text=element_text(size=10),
legend.key.size = unit(.4, "cm"),
panel.grid.major = element_line(size = 0.05),
panel.grid.minor = element_line(size = 0.2)) +
scale_fill_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4")) +
scale_color_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4"))
ggsave("rcp45_25_line.png", br_plt, path=data_dir, dpi=500, device="png", width=5.5, height=3.1, unit="in")
rm(rcp45_25)
###############################################################################################################
###########################
###########################          rcp85_25
###########################
rm(list=ls())
library(data.table)
library(ggplot2)
data_dir = "/Users/hn/Documents/GitHub/Kirti/codling_moth/to_write_paper/figures/pest_window/"
color_ord = c("grey70", "dodgerblue", "olivedrab4", "darkgoldenrod1")
input_name = "rcp85_25.csv"
rcp85_25 <- data.table(read.csv(paste0(data_dir, input_name)))
rcp85_25[rcp85_25$ClimateGroup == "colder", ]$ClimateGroup = "Cooler Areas"
rcp85_25[rcp85_25$ClimateGroup == "warmer", ]$ClimateGroup = "Warmer Areas"
rcp85_25 = melt(rcp85_25, id = c("ClimateGroup", "CountyGroup"))
rcp85_25$CountyGroup = factor(rcp85_25$CountyGroup, levels = c("Historical",
"2040's",
"2060's",
"2080's"))
br_plt <- ggplot(rcp85_25, aes(x=CountyGroup, y=value, color=variable)) +
geom_point() +
#geom_line() +
geom_line(group= rcp85_25$CountyGroup) +
facet_grid(. ~ ClimateGroup, scales = "free") +
labs(y="Julian day (median)") +
ylim(0, 300) +
theme_bw() +
theme(axis.text.y = element_text(size = 9, angle=90, color="black"),
axis.text.x = element_text(size = 9, color="black"),
axis.title.x=element_blank(),
legend.position="bottom",
legend.spacing.x = unit(.1, 'cm'),
legend.title=element_blank(),
legend.text=element_text(size=10),
legend.key.size = unit(.4, "cm"),
panel.grid.major = element_line(size = 0.05),
panel.grid.minor = element_line(size = 0.2)) +
scale_fill_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4")) +
scale_color_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4"))
ggsave("rcp85_25_line.png", br_plt, path=data_dir, dpi=500, device="png", width=5.5, height=3.1, unit="in")
###########################
###########################          75 %
###########################
###############################################################################################################
###############################################################################################################
###########################
###########################          rcp45_75
###########################
rm(list=ls())
library(data.table)
library(ggplot2)
data_dir = "/Users/hn/Documents/GitHub/Kirti/codling_moth/to_write_paper/figures/pest_window/"
color_ord = c("grey70", "dodgerblue", "olivedrab4", "darkgoldenrod1")
input_name = "rcp45_75.csv"
rcp45_75 <- data.table(read.csv(paste0(data_dir, input_name)))
rcp45_75[rcp45_75$ClimateGroup == "colder", ]$ClimateGroup = "Cooler Areas"
rcp45_75[rcp45_75$ClimateGroup == "warmer", ]$ClimateGroup = "Warmer Areas"
rcp45_75 = melt(rcp45_75, id = c("ClimateGroup", "CountyGroup"))
rcp45_75$CountyGroup = factor(rcp45_75$CountyGroup, levels = c("Historical",
"2040's",
"2060's",
"2080's"))
br_plt <- ggplot(rcp45_75, aes(x=CountyGroup, y=value, color=variable)) +
geom_point() +
#geom_line() +
geom_line(group= rcp45_75$CountyGroup) +
facet_grid(. ~ ClimateGroup, scales = "free") +
labs(y="Julian day (median)") +
ylim(0, 300) +
theme_bw() +
theme(axis.text.y = element_text(size = 9, angle=90, color="black"),
axis.text.x = element_text(size = 9, color="black"),
axis.title.x=element_blank(),
legend.position="bottom",
legend.spacing.x = unit(.1, 'cm'),
legend.title=element_blank(),
legend.text=element_text(size=10),
legend.key.size = unit(.4, "cm"),
panel.grid.major = element_line(size = 0.05),
panel.grid.minor = element_line(size = 0.2)) +
scale_fill_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4")) +
scale_color_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4"))
ggsave("rcp45_75_line.png", br_plt, path=data_dir, dpi=500, device="png", width=5.5, height=3.1, unit="in")
rm(rcp45_75)
###############################################################################################################
###########################
###########################          rcp85_75
###########################
rm(list=ls())
library(data.table)
library(ggplot2)
data_dir = "/Users/hn/Documents/GitHub/Kirti/codling_moth/to_write_paper/figures/pest_window/"
color_ord = c("grey70", "dodgerblue", "olivedrab4", "darkgoldenrod1")
input_name = "rcp85_75.csv"
rcp85_75 <- data.table(read.csv(paste0(data_dir, input_name)))
rcp85_75[rcp85_75$ClimateGroup == "colder", ]$ClimateGroup = "Cooler Areas"
rcp85_75[rcp85_75$ClimateGroup == "warmer", ]$ClimateGroup = "Warmer Areas"
rcp85_75 = melt(rcp85_75, id = c("ClimateGroup", "CountyGroup"))
rcp85_75$CountyGroup = factor(rcp85_75$CountyGroup, levels = c("Historical",
"2040's",
"2060's",
"2080's"))
br_plt <- ggplot(rcp85_75, aes(x=CountyGroup, y=value, color=variable)) +
geom_point() +
#geom_line() +
geom_line(group= rcp85_75$CountyGroup) +
facet_grid(. ~ ClimateGroup, scales = "free") +
labs(y="Julian day (median)") +
ylim(0, 300) +
theme_bw() +
theme(axis.text.y = element_text(size = 9, angle=90, color="black"),
axis.text.x = element_text(size = 9, color="black"),
axis.title.x=element_blank(),
legend.position="bottom",
legend.spacing.x = unit(.1, 'cm'),
legend.title=element_blank(),
legend.text=element_text(size=10),
legend.key.size = unit(.4, "cm"),
panel.grid.major = element_line(size = 0.05),
panel.grid.minor = element_line(size = 0.2)) +
scale_fill_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4")) +
scale_color_manual(values=color_ord,
name="Time\nperiod",
labels=c("Gen. 1","Gen. 2","Gen. 3","Gen. 4"))
ggsave("rcp85_75_line.png", br_plt, path=data_dir, dpi=500, device="png", width=5.5, height=3.1, unit="in")
rm(rcp85_75)
rm(list=ls())
library(ggmap)
library(maps)
library(tmap)
library(rgdal)
library(magrittr)
library(sf)
library(raster)
library(dplyr)
library(tigris)
library(ggplot2)
library(ggthemes)
library(choroplethr)
library(choroplethrMaps)
rm(list=ls())
library(ggmap)
library(maps)
library(tmap)
library(rgdal)
library(magrittr)
library(sf)
library(raster)
library(dplyr)
library(tigris)
library(ggplot2)
library(ggthemes)
library(choroplethr)
library(choroplethrMaps)
setwd("/Users/hn/Documents/GitHub/Kirti/merge_irrigation_Monday/Help_with_plotting_maps")
cnt_level <- "USGSDataAtCountyLevel.csv"
cnt_level <- data.table(read.csv(paste0(csv_data_dir, cnt_level)))
names(cnt_level)[names(cnt_level) == "fips"] = "FIPS"
cnt_level <- data.table(read.csv(cnt_level))
names(cnt_level)[names(cnt_level) == "fips"] = "FIPS"
crd_level <- "USGSDataAtCRDLevel.csv"
crd_level <- data.table(read.csv(crd_level))
stat_level <- "USGSDataAtStateLevel.csv"
stat_level <- "USGSDataAtStateLevel.csv"
stat_level <- data.table(read.csv(stat_level))
stat_level = stat_level[-51, ] # remove the last row (it is all NA)
## read us counties map
ds = "/Users/hn/Documents/GitHub/Kirti/merge_irrigation_Monday/"
US_cnt_ly_name = "UScounties"
US_cnt <- read_sf(dsn=path.expand(ds), layer = US_cnt_ly_name, quiet = TRUE)
# get rid of Alaska and Hawaii
US_cnt_main_land = US_cnt[US_cnt$STATE_NAME != "Alaska", ]
US_cnt_main_land = US_cnt_main_land[US_cnt_main_land$STATE_NAME != "Hawaii", ]
US_cnt_main_land$FIPS=as.numeric(US_cnt_main_land$FIPS) ### change to numeric so it matched with cnt_level
## read us counties map
ds = "/Users/hn/Documents/GitHub/Kirti/merge_irrigation_Monday/"
US_cnt_ly_name = "UScounties"
US_cnt <- read_sf(dsn=path.expand(ds), layer = US_cnt_ly_name, quiet = TRUE)
## read us counties map
ds = "/Users/hn/Documents/GitHub/Kirti/merge_irrigation_Monday/UScounties/"
US_cnt_ly_name = "UScounties"
US_cnt <- read_sf(dsn=path.expand(ds), layer = US_cnt_ly_name, quiet = TRUE)
# get rid of Alaska and Hawaii
US_cnt_main_land = US_cnt[US_cnt$STATE_NAME != "Alaska", ]
US_cnt_main_land = US_cnt_main_land[US_cnt_main_land$STATE_NAME != "Hawaii", ]
US_cnt_main_land$FIPS=as.numeric(US_cnt_main_land$FIPS) ### change to numeric so it matched with cnt_level
#### merge county level
cnt_level_merge <- merge(US_cnt_main_land, cnt_level, by="FIPS", all.x=T)
View(cnt_level_merge)
## plot county maps
library(RColorBrewer)
my.palette <- brewer.pal(n = 7, name = "Blues")
plot(cnt_level_merge["totalAcres15"], pal=brewer.pal(n = 7, name = "Blues"), lwd= .1,breaks = c(0,25,50,100,200,500,1000,1200))
summary(cnt_level_merge)
# summary(cnt_level_merge)
plot(cnt_level_merge["IrrTotalWith15"], pal=brewer.pal(n = 6, name = "Blues"), lwd= .1,breaks = c(0,1.5,10,100,500,1000,2000))
plot(cnt_level_merge["totalAcres15"], pal=brewer.pal(n = 7, name = "Blues"), lwd= .1, breaks = c(0,25,50,100,200,500,1000,1200))
title( main = "County Level (Total Irrigated Acres in 2015)", cex.main=1)
cnt_level_merge
plot(cnt_level_merge["totalAcres15"])
plot(cnt_level_merge["totalAcres15"], pal=brewer.pal(n = 7, name = "Blues"), lwd= .1, breaks = c(0,25,50,100,200,500,1000,1200)) +
title( main = "County Level (Total Irrigated Acres in 2015)", cex.main=1)
plot(cnt_level_merge["totalAcres15"], pal=brewer.pal(n = 7, name = "Blues"), lwd= .1, breaks = c(0,25,50,100,200,500,1000,1200)) +
title( main = "County Level (Total Irrigated Acres in 2015)", cex.main=1)
plot(cnt_level_merge["totalAcres15"],
pal=brewer.pal(n = 7, name = "Blues"),
lwd= .1, breaks = c(0,25,50,100,200,500,1000,1200),
main = "County Level (Total Irrigated Acres in 2015)") +
# summary(cnt_level_merge)
plot(cnt_level_merge["IrrTotalWith15"], pal=brewer.pal(n = 6, name = "Blues"), lwd= .1, breaks = c(0,1.5,10,100,500,1000,2000))
plot(cnt_level_merge["totalAcres15"],
pal=brewer.pal(n = 7, name = "Blues"),
lwd= .1, breaks = c(0,25,50,100,200,500,1000,1200),
main = "County Level (Total Irrigated Acres in 2015)")
plot(cnt_level_merge["IrrTotalWith15"], pal=brewer.pal(n = 6, name = "Blues"), lwd= .1, breaks = c(0,1.5,10,100,500,1000,2000))
title( main = "County Level (Total Irrigated Acres in 2015)", cex.main=1)
plot(cnt_level_merge["totalAcres15"],
pal=brewer.pal(n = 7, name = "Blues"),
lwd= .1, breaks = c(0,25,50,100,200,500,1000,1200),
main = "County Level (Total Irrigated Acres in 2015)",
cex.main=1)
plot(cnt_level_merge["totalAcres15"],
pal=brewer.pal(n = 7, name = "Blues"),
lwd= .1, breaks = c(0,25,50,100,200,500,1000,1200),
main = "County Level (Total Irrigated Acres in 2015)",
cex.main=3)
plot(cnt_level_merge["totalAcres15"],
pal=brewer.pal(n = 7, name = "Blues"),
lwd= .1, breaks = c(0,25,50,100,200,500,1000,1200),
main = "County Level (Total Irrigated Acres in 2015)",
cex.main=1)
# summary(cnt_level_merge)
plot(cnt_level_merge["IrrTotalWith15"],
pal=brewer.pal(n = 6, name = "Blues"),
lwd= .1,
breaks = c(0,1.5,10,100,500,1000,2000),
main = "County Level (Total Irrigation Water Withdrawal in 2015 in MGD)",
cex.main=1)
legend(1, 95)
ls()
url <- "https://www.nass.usda.gov/Data_and_Statistics/County_Data_Files/Frequently_Asked_Questions/county_list.txt"
url_df <- read_lines(url, skip = 12) %>%
data.frame(col = .) %>%
mutate(col = str_replace_all(col, "\\t", " ")) %>%
separate(col, into = paste0("X", 1:5), sep = "\\s{2,}", extra = "drop") %>%
na.omit()
colnames(url_df) <- c("state_FIPS", "district_FIPS", "county_FIPS", "state_cnt_name", "flag")
url_df <- data.table(url_df)
url_df <- url_df[url_df$county_FIPS != "000", ]
url_df <- url_df[url_df$county_FIPS != "888", ]
url_df <- url_df[url_df$county_FIPS != "999", ]
url_df <- url_df[url_df$flag == 1]
url <- "https://www.nass.usda.gov/Data_and_Statistics/County_Data_Files/Frequently_Asked_Questions/county_list.txt"
url_df <- read_lines(url, skip = 12) %>% data.frame(col = .) %>% mutate(col = str_replace_all(col, "\\t", " ")) %>%
separate(col, into = paste0("X", 1:5), sep = "\\s{2,}", extra = "drop") %>%
na.omit()
library(tidyr)
library(dplyr)
library(readr)
library(tidyverse)
url_df <- read_lines(url, skip = 12) %>%
data.frame(col = .) %>%
mutate(col = str_replace_all(col, "\\t", " ")) %>%
separate(col, into = paste0("X", 1:5), sep = "\\s{2,}", extra = "drop") %>%
na.omit()
url_df
head(url_df)
colnames(url_df) <- c("state_FIPS", "district_FIPS", "county_FIPS", "state_cnt_name", "flag")
head(url_df)
url_df <- data.table(url_df)
head(url_df)
url_df <- url_df[url_df$county_FIPS != "000", ]
url_df <- url_df[url_df$county_FIPS != "888", ]
url_df <- url_df[url_df$county_FIPS != "999", ]
url_df <- url_df[url_df$flag == 1]
head(url_df)
url_df$FIPS <- with(url_df, paste0(state_FIPS, county_FIPS))
head(url_df)
rm(list=ls())
CRD_URL <- data.table(readRDS("/Users/hn/Documents/GitHub/Kirti/merge_irrigation_Monday/NASS_county.rds"))
CRD_URL
